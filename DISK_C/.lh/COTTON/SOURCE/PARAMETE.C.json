{
    "sourceFile": "COTTON/SOURCE/PARAMETE.C",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1681528502523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1681529087388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n #include \"TOTAL.H\"\r\n-// ר������д�й�edit��past�ĺ���\r\n+// 专门用来写有关edit和past的函数\r\n \r\n int judgename(char name[])\r\n {\r\n     static int i, j;\r\n@@ -9,13 +9,13 @@\n         void *buffer;\r\n         unsigned s;\r\n         setfillstyle(1, CYAN);\r\n         bar(240, 30, 470, 70);\r\n-        puthz(242, 33, \"����������Ϊ��\", 32, 32, BLUE);\r\n+        puthz(242, 33, \"参数名不能为空\", 32, 32, BLUE);\r\n         delay(1000);\r\n         setfillstyle(1, 0);\r\n         bar(240, 30, 470, 70);\r\n-        puthz(240, 30, \"��ѡ�����\", 32, 32, BLUE);\r\n+        puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n         return 0;\r\n     }\r\n     for (i = 0; i < h->lenpar; i++)\r\n     {\r\n@@ -34,13 +34,13 @@\n         if (j == 10)\r\n         {\r\n             setfillstyle(1, CYAN);\r\n             bar(240, 30, 470, 70);\r\n-            puthz(242, 33, \"�������Ѿ�����\", 32, 32, BLUE);\r\n+            puthz(242, 33, \"参数名已经存在\", 32, 32, BLUE);\r\n             delay(1000);\r\n             setfillstyle(1, 0);\r\n             bar(240, 30, 470, 70);\r\n-            puthz(240, 30, \"��ѡ�����\", 32, 32, BLUE);\r\n+            puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n \r\n             return 0;\r\n         }\r\n     }\r\n@@ -53,26 +53,26 @@\n     if (S[0] == '\\0')\r\n     {\r\n         setfillstyle(1, CYAN);\r\n         bar(80, 100, 380, 140);\r\n-        puthz(83, 100, \"�����������Ϊ��\", 32, 32, BLUE);\r\n+        puthz(83, 100, \"土地面积不能为空\", 32, 32, BLUE);\r\n         delay(1000);\r\n         setfillstyle(1, 0);\r\n         bar(80, 100, 380, 140);\r\n-        puthz(70, 100, \"�����Ƽ���ֲ���޻�����Ϊ��\", 32, 32, BLUE);\r\n+        puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n         return 0;\r\n     }\r\n     for (i = 0; i < strlen(S); i++)\r\n     {\r\n         if (S[i] > '9' || S[i] < '0')\r\n         {\r\n             setfillstyle(1, CYAN);\r\n             bar(80, 100, 340, 140);\r\n-            puthz(83, 100, \"����������\", 32, 32, BLUE);\r\n+            puthz(83, 100, \"请输入数字\", 32, 32, BLUE);\r\n             delay(1000);\r\n             setfillstyle(1, 0);\r\n             bar(80, 100, 340, 140);\r\n-            puthz(70, 100, \"�����Ƽ���ֲ���޻�����Ϊ��\", 32, 32, BLUE);\r\n+            puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n             return 0;\r\n         }\r\n     }\r\n     return 1;\r\n@@ -84,19 +84,19 @@\n     user *u = (user *)malloc(sizeof(user));\r\n     int i, j, k, all;\r\n     if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n     {\r\n-        puthz(120, 300, \"�򿪴���\", 32, 32, BLUE);\r\n+        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n         delay(3000);\r\n         return;\r\n     }\r\n     fseek(fp, 0, SEEK_END);\r\n-    all = ftell(fp) / sizeof(user); // �ļ���user������\r\n+    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n     for (i = 0; i < all; i++)\r\n     {\r\n         fseek(fp, i * sizeof(user), SEEK_SET);\r\n         fread(u, sizeof(user), 1, fp);\r\n-        for (j = 0; j < 10; j++) // �����˺�λ��\r\n+        for (j = 0; j < 10; j++) // 查找账号位置\r\n         {\r\n \r\n             if (u->username[j] != h->username[j])\r\n             {\r\n@@ -107,9 +107,9 @@\n                 j = 10;\r\n                 break;\r\n             }\r\n         }\r\n-        if (j == 10) // �ҵ��˾��޸Ĳ���\r\n+        if (j == 10) // 找到了就修改参数\r\n         {\r\n             // strcpy(h->parameter[h->lenpar].name,abc->name);\r\n             for (k = 0; k < 10; k++)\r\n             {\r\n@@ -127,39 +127,39 @@\n             h->parameter[h->lenpar].lenxy = abc->lenxy;\r\n             h->lenpar += 1;\r\n             fseek(fp, i * sizeof(user), SEEK_SET);\r\n             fwrite(h, sizeof(user), 1, fp);\r\n-            puthz(220, 100, \"���Ӳ����ɹ�\", 32, 32, BLUE);\r\n+            puthz(220, 100, \"增加参数成功\", 32, 32, BLUE);\r\n             delay(2000);\r\n         }\r\n     }\r\n-    // char name[10];//����\r\n-    // char place;//����\r\n-    // char shape;//������״\r\n-    // char type;//�ո������\r\n-    // int S;//���\r\n-    // int xyz[200];//����\r\n+    // char name[10];//名字\r\n+    // char place;//产区\r\n+    // char shape;//土地形状\r\n+    // char type;//收割机类型\r\n+    // int S;//面积\r\n+    // int xyz[200];//坐标\r\n \r\n     free(u);\r\n     u = NULL;\r\n     fclose(fp);\r\n     return;\r\n }\r\n \r\n-// �ѵ�ǰ��¼���û�����д���ļ�\r\n+// 把当前登录的用户重新写进文件\r\n void wr_h(void)\r\n {\r\n     FILE *fp;\r\n     user *u = (user *)malloc(sizeof(user));\r\n     int i, j, k, all;\r\n     if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n     {\r\n-        puthz(120, 300, \"�򿪴���\", 32, 32, BLUE);\r\n+        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n         delay(3000);\r\n         return;\r\n     }\r\n     fseek(fp, 0, SEEK_END);\r\n-    all = ftell(fp) / sizeof(user); // �ļ���user������\r\n+    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n     for (i = 0; i < all; i++)\r\n     {\r\n         fseek(fp, i * sizeof(user), SEEK_SET);\r\n         fread(u, sizeof(user), 1, fp);\r\n@@ -175,9 +175,9 @@\n                 j = 10;\r\n                 break;\r\n             }\r\n         }\r\n-        if (j == 10) // �ҵ��˾Ͱ�h����ȥ\r\n+        if (j == 10) // 找到了就把h传进去\r\n         {\r\n             fseek(fp, i * sizeof(user), SEEK_SET);\r\n             fwrite(h, sizeof(user), 1, fp);\r\n         }\r\n@@ -188,9 +188,9 @@\n     fclose(fp);\r\n     return;\r\n }\r\n \r\n-// ɾ������\r\n+// 删除参数\r\n void deletepar(int par)\r\n {\r\n     int i, j, k;\r\n     par -= 1;\r\n@@ -214,40 +214,40 @@\n     h->lenpar -= 1;\r\n     wr_h();\r\n }\r\n \r\n-// �����ĸ�����1Ϊ�޸ĳɹ�������-1Ϊ���޸�\r\n+// 下面四个返回1为修改成功，返回-1为无修改\r\n \r\n-// �޸Ĳ���\r\n+// 修改产区\r\n int changeplace(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"������ѡ�����\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, LIGHTRED);\r\n     bar(305, 240, 335, 270);\r\n-    puthz(300, 200, \"����\", 16, 16, BLUE);\r\n+    puthz(300, 200, \"长江\", 16, 16, BLUE);\r\n     bar(180, 240, 210, 270);\r\n-    puthz(175, 200, \"�½�\", 16, 16, BLUE);\r\n+    puthz(175, 200, \"新疆\", 16, 16, BLUE);\r\n     bar(430, 240, 460, 270);\r\n-    puthz(425, 200, \"�ƺ�\", 16, 16, BLUE);\r\n+    puthz(425, 200, \"黄河\", 16, 16, BLUE);\r\n \r\n     quit();\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n \r\n-        if (mouse_press(305, 240, 335, 270) == 1) // ����\r\n+        if (mouse_press(305, 240, 335, 270) == 1) // 长江\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'c';\r\n             setfillstyle(1, BROWN);\r\n@@ -257,9 +257,9 @@\n             setfillstyle(1, LIGHTRED);\r\n             bar(180, 240, 210, 270);\r\n             bar(430, 240, 460, 270);\r\n         }\r\n-        if (mouse_press(180, 240, 210, 270) == 1) // �½�\r\n+        if (mouse_press(180, 240, 210, 270) == 1) // 新疆\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -269,9 +269,9 @@\n             setfillstyle(1, LIGHTRED);\r\n             bar(305, 240, 335, 270);\r\n             bar(430, 240, 460, 270);\r\n         }\r\n-        if (mouse_press(430, 240, 460, 270) == 1) // �ƺ�\r\n+        if (mouse_press(430, 240, 460, 270) == 1) // 黄河\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -282,50 +282,50 @@\n             bar(180, 240, 210, 270);\r\n             bar(305, 240, 335, 270);\r\n         }\r\n \r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             h->parameter[par - 1].place = choose;\r\n             wr_h();\r\n             return 1;\r\n         }\r\n     }\r\n }\r\n \r\n-// �޸�������״\r\n+// 修改土地形状\r\n int changeshape(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(200, 150, \"������ѡ��������״\", 32, 32, BLUE);\r\n+    puthz(200, 150, \"请重新选择土地形状\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, YELLOW);\r\n     pieslice(170, 240, 0, 360, 20);\r\n-    puthz(155, 195, \"����\", 16, 16, BLUE);\r\n+    puthz(155, 195, \"矩形\", 16, 16, BLUE);\r\n     pieslice(270, 240, 0, 360, 20);\r\n-    puthz(255, 195, \"Բ��\", 16, 16, BLUE);\r\n+    puthz(255, 195, \"圆形\", 16, 16, BLUE);\r\n     pieslice(370, 240, 0, 360, 20);\r\n-    puthz(340, 195, \"�����\", 16, 16, BLUE);\r\n+    puthz(340, 195, \"多边形\", 16, 16, BLUE);\r\n     pieslice(470, 240, 0, 360, 20);\r\n-    puthz(425, 195, \"�Զ���ͼ��\", 16, 16, BLUE);\r\n+    puthz(425, 195, \"自定义图形\", 16, 16, BLUE);\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n-        if (mouse_press(150, 220, 190, 360) == 1) // ����\r\n+        if (mouse_press(150, 220, 190, 360) == 1) // 矩形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -336,9 +336,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(170, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(250, 220, 290, 360) == 1) // Բ��\r\n+        if (mouse_press(250, 220, 290, 360) == 1) // 圆形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -349,9 +349,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(270, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(350, 220, 390, 360) == 1) // �����\r\n+        if (mouse_press(350, 220, 390, 360) == 1) // 多边形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'c';\r\n             setfillstyle(1, BROWN);\r\n@@ -362,9 +362,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(370, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(450, 220, 490, 360) == 1) // �Զ���ͼ��\r\n+        if (mouse_press(450, 220, 490, 360) == 1) // 自定义图形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'd';\r\n             setfillstyle(1, BROWN);\r\n@@ -375,13 +375,13 @@\n             pieslice(170, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(470, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             if (choose == 'c')\r\n             {\r\n                 select02(&(h->parameter[par - 1]));\r\n@@ -396,33 +396,33 @@\n         }\r\n     }\r\n }\r\n \r\n-// �޸��ո������\r\n+// 修改收割机类型\r\n int changetype(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"������ѡ�����\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, YELLOW);\r\n     pieslice(200, 240, 0, 360, 20);\r\n-    puthz(175, 195, \"��ֱʽ\", 16, 16, BLUE);\r\n+    puthz(175, 195, \"垂直式\", 16, 16, BLUE);\r\n     pieslice(440, 240, 0, 360, 20);\r\n-    puthz(415, 195, \"ˮƽʽ\", 16, 16, BLUE);\r\n+    puthz(415, 195, \"水平式\", 16, 16, BLUE);\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n-        if (mouse_press(180, 220, 220, 260) == 1) // ��ֱʽ\r\n+        if (mouse_press(180, 220, 220, 260) == 1) // 垂直式\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -431,9 +431,9 @@\n             pieslice(440, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(200, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(420, 220, 460, 260) == 1) // ˮƽʽ\r\n+        if (mouse_press(420, 220, 460, 260) == 1) // 水平式\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -442,35 +442,35 @@\n             pieslice(200, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(440, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             h->parameter[par - 1].type = choose;\r\n             wr_h();\r\n             return 1;\r\n         }\r\n     }\r\n }\r\n \r\n-// �޸����\r\n+// 修改面积\r\n int changeS(int par)\r\n {\r\n     INPUT S = {245, 220, 445, 260, \"\", 6, 0, 0};\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"�������������\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新输入面积\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n-    puthz(170, 220, \"�����\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n+    puthz(170, 220, \"面积：\", 32, 32, BLUE);\r\n     setfillstyle(1, 0);\r\n     bar(245, 220, 445, 260);\r\n \r\n     for (;;)\r\n@@ -478,13 +478,13 @@\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n         input_s(248, 220, &S, 16, 0);\r\n \r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             strcpy(h->parameter[par - 1].S, S.string);\r\n             wr_h();\r\n             return 1;\r\n"
                },
                {
                    "date": 1681530953158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n #include \"TOTAL.H\"\r\n-// ר������д�й�edit��past�ĺ���\r\n+// 专门用来写有关edit和past的函数\r\n \r\n int judgename(char name[])\r\n {\r\n     static int i, j;\r\n@@ -9,13 +9,13 @@\n         void *buffer;\r\n         unsigned s;\r\n         setfillstyle(1, CYAN);\r\n         bar(240, 30, 470, 70);\r\n-        puthz(242, 33, \"����������Ϊ��\", 32, 32, BLUE);\r\n+        puthz(242, 33, \"参数名不能为空\", 32, 32, BLUE);\r\n         delay(1000);\r\n         setfillstyle(1, 0);\r\n         bar(240, 30, 470, 70);\r\n-        puthz(240, 30, \"��ѡ�����\", 32, 32, BLUE);\r\n+        puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n         return 0;\r\n     }\r\n     for (i = 0; i < h->lenpar; i++)\r\n     {\r\n@@ -34,13 +34,13 @@\n         if (j == 10)\r\n         {\r\n             setfillstyle(1, CYAN);\r\n             bar(240, 30, 470, 70);\r\n-            puthz(242, 33, \"�������Ѿ�����\", 32, 32, BLUE);\r\n+            puthz(242, 33, \"参数名已经存在\", 32, 32, BLUE);\r\n             delay(1000);\r\n             setfillstyle(1, 0);\r\n             bar(240, 30, 470, 70);\r\n-            puthz(240, 30, \"��ѡ�����\", 32, 32, BLUE);\r\n+            puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n \r\n             return 0;\r\n         }\r\n     }\r\n@@ -53,26 +53,26 @@\n     if (S[0] == '\\0')\r\n     {\r\n         setfillstyle(1, CYAN);\r\n         bar(80, 100, 380, 140);\r\n-        puthz(83, 100, \"�����������Ϊ��\", 32, 32, BLUE);\r\n+        puthz(83, 100, \"土地面积不能为空\", 32, 32, BLUE);\r\n         delay(1000);\r\n         setfillstyle(1, 0);\r\n         bar(80, 100, 380, 140);\r\n-        puthz(70, 100, \"�����Ƽ���ֲ���޻�����Ϊ��\", 32, 32, BLUE);\r\n+        puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n         return 0;\r\n     }\r\n     for (i = 0; i < strlen(S); i++)\r\n     {\r\n         if (S[i] > '9' || S[i] < '0')\r\n         {\r\n             setfillstyle(1, CYAN);\r\n             bar(80, 100, 340, 140);\r\n-            puthz(83, 100, \"����������\", 32, 32, BLUE);\r\n+            puthz(83, 100, \"请输入数字\", 32, 32, BLUE);\r\n             delay(1000);\r\n             setfillstyle(1, 0);\r\n             bar(80, 100, 340, 140);\r\n-            puthz(70, 100, \"�����Ƽ���ֲ���޻�����Ϊ��\", 32, 32, BLUE);\r\n+            puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n             return 0;\r\n         }\r\n     }\r\n     return 1;\r\n@@ -84,19 +84,19 @@\n     user *u = (user *)malloc(sizeof(user));\r\n     int i, j, k, all;\r\n     if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n     {\r\n-        puthz(120, 300, \"�򿪴���\", 32, 32, BLUE);\r\n+        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n         delay(3000);\r\n         return;\r\n     }\r\n     fseek(fp, 0, SEEK_END);\r\n-    all = ftell(fp) / sizeof(user); // �ļ���user������\r\n+    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n     for (i = 0; i < all; i++)\r\n     {\r\n         fseek(fp, i * sizeof(user), SEEK_SET);\r\n         fread(u, sizeof(user), 1, fp);\r\n-        for (j = 0; j < 10; j++) // �����˺�λ��\r\n+        for (j = 0; j < 10; j++) // 查找账号位置\r\n         {\r\n \r\n             if (u->username[j] != h->username[j])\r\n             {\r\n@@ -107,9 +107,9 @@\n                 j = 10;\r\n                 break;\r\n             }\r\n         }\r\n-        if (j == 10) // �ҵ��˾��޸Ĳ���\r\n+        if (j == 10) // 找到了就修改参数\r\n         {\r\n             // strcpy(h->parameter[h->lenpar].name,abc->name);\r\n             for (k = 0; k < 10; k++)\r\n             {\r\n@@ -127,39 +127,39 @@\n             h->parameter[h->lenpar].lenxy = abc->lenxy;\r\n             h->lenpar += 1;\r\n             fseek(fp, i * sizeof(user), SEEK_SET);\r\n             fwrite(h, sizeof(user), 1, fp);\r\n-            puthz(220, 100, \"���Ӳ����ɹ�\", 32, 32, BLUE);\r\n+            puthz(220, 100, \"增加参数成功\", 32, 32, BLUE);\r\n             delay(2000);\r\n         }\r\n     }\r\n-    // char name[10];//����\r\n-    // char place;//����\r\n-    // char shape;//������״\r\n-    // char type;//�ո������\r\n-    // int S;//���\r\n-    // int xyz[200];//����\r\n+    // char name[10];//名字\r\n+    // char place;//产区\r\n+    // char shape;//土地形状\r\n+    // char type;//收割机类型\r\n+    // int S;//面积\r\n+    // int xyz[200];//坐标\r\n \r\n     free(u);\r\n     u = NULL;\r\n     fclose(fp);\r\n     return;\r\n }\r\n \r\n-// �ѵ�ǰ��¼���û�����д���ļ�\r\n+// 把当前登录的用户重新写进文件\r\n void wr_h(void)\r\n {\r\n     FILE *fp;\r\n     user *u = (user *)malloc(sizeof(user));\r\n     int i, j, k, all;\r\n     if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n     {\r\n-        puthz(120, 300, \"�򿪴���\", 32, 32, BLUE);\r\n+        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n         delay(3000);\r\n         return;\r\n     }\r\n     fseek(fp, 0, SEEK_END);\r\n-    all = ftell(fp) / sizeof(user); // �ļ���user������\r\n+    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n     for (i = 0; i < all; i++)\r\n     {\r\n         fseek(fp, i * sizeof(user), SEEK_SET);\r\n         fread(u, sizeof(user), 1, fp);\r\n@@ -175,9 +175,9 @@\n                 j = 10;\r\n                 break;\r\n             }\r\n         }\r\n-        if (j == 10) // �ҵ��˾Ͱ�h����ȥ\r\n+        if (j == 10) // 找到了就把h传进去\r\n         {\r\n             fseek(fp, i * sizeof(user), SEEK_SET);\r\n             fwrite(h, sizeof(user), 1, fp);\r\n         }\r\n@@ -188,9 +188,9 @@\n     fclose(fp);\r\n     return;\r\n }\r\n \r\n-// ɾ������\r\n+// 删除参数\r\n void deletepar(int par)\r\n {\r\n     int i, j, k;\r\n     par -= 1;\r\n@@ -214,40 +214,40 @@\n     h->lenpar -= 1;\r\n     wr_h();\r\n }\r\n \r\n-// �����ĸ�����1Ϊ�޸ĳɹ�������-1Ϊ���޸�\r\n+// 下面四个返回1为修改成功，返回-1为无修改\r\n \r\n-// �޸Ĳ���\r\n+// 修改产区\r\n int changeplace(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"������ѡ�����\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, LIGHTRED);\r\n     bar(305, 240, 335, 270);\r\n-    puthz(300, 200, \"����\", 16, 16, BLUE);\r\n+    puthz(300, 200, \"长江\", 16, 16, BLUE);\r\n     bar(180, 240, 210, 270);\r\n-    puthz(175, 200, \"�½�\", 16, 16, BLUE);\r\n+    puthz(175, 200, \"新疆\", 16, 16, BLUE);\r\n     bar(430, 240, 460, 270);\r\n-    puthz(425, 200, \"�ƺ�\", 16, 16, BLUE);\r\n+    puthz(425, 200, \"黄河\", 16, 16, BLUE);\r\n \r\n     quit();\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n \r\n-        if (mouse_press(305, 240, 335, 270) == 1) // ����\r\n+        if (mouse_press(305, 240, 335, 270) == 1) // 长江\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'c';\r\n             setfillstyle(1, BROWN);\r\n@@ -257,9 +257,9 @@\n             setfillstyle(1, LIGHTRED);\r\n             bar(180, 240, 210, 270);\r\n             bar(430, 240, 460, 270);\r\n         }\r\n-        if (mouse_press(180, 240, 210, 270) == 1) // �½�\r\n+        if (mouse_press(180, 240, 210, 270) == 1) // 新疆\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -269,9 +269,9 @@\n             setfillstyle(1, LIGHTRED);\r\n             bar(305, 240, 335, 270);\r\n             bar(430, 240, 460, 270);\r\n         }\r\n-        if (mouse_press(430, 240, 460, 270) == 1) // �ƺ�\r\n+        if (mouse_press(430, 240, 460, 270) == 1) // 黄河\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -282,50 +282,50 @@\n             bar(180, 240, 210, 270);\r\n             bar(305, 240, 335, 270);\r\n         }\r\n \r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             h->parameter[par - 1].place = choose;\r\n             wr_h();\r\n             return 1;\r\n         }\r\n     }\r\n }\r\n \r\n-// �޸�������״\r\n+// 修改土地形状\r\n int changeshape(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(200, 150, \"������ѡ��������״\", 32, 32, BLUE);\r\n+    puthz(200, 150, \"请重新选择土地形状\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, YELLOW);\r\n     pieslice(170, 240, 0, 360, 20);\r\n-    puthz(155, 195, \"����\", 16, 16, BLUE);\r\n+    puthz(155, 195, \"矩形\", 16, 16, BLUE);\r\n     pieslice(270, 240, 0, 360, 20);\r\n-    puthz(255, 195, \"Բ��\", 16, 16, BLUE);\r\n+    puthz(255, 195, \"圆形\", 16, 16, BLUE);\r\n     pieslice(370, 240, 0, 360, 20);\r\n-    puthz(340, 195, \"�����\", 16, 16, BLUE);\r\n+    puthz(340, 195, \"多边形\", 16, 16, BLUE);\r\n     pieslice(470, 240, 0, 360, 20);\r\n-    puthz(425, 195, \"�Զ���ͼ��\", 16, 16, BLUE);\r\n+    puthz(425, 195, \"自定义图形\", 16, 16, BLUE);\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n-        if (mouse_press(150, 220, 190, 360) == 1) // ����\r\n+        if (mouse_press(150, 220, 190, 360) == 1) // 矩形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -336,9 +336,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(170, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(250, 220, 290, 360) == 1) // Բ��\r\n+        if (mouse_press(250, 220, 290, 360) == 1) // 圆形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -349,9 +349,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(270, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(350, 220, 390, 360) == 1) // �����\r\n+        if (mouse_press(350, 220, 390, 360) == 1) // 多边形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'c';\r\n             setfillstyle(1, BROWN);\r\n@@ -362,9 +362,9 @@\n             pieslice(470, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(370, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(450, 220, 490, 360) == 1) // �Զ���ͼ��\r\n+        if (mouse_press(450, 220, 490, 360) == 1) // 自定义图形\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'd';\r\n             setfillstyle(1, BROWN);\r\n@@ -375,13 +375,13 @@\n             pieslice(170, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(470, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             if (choose == 'c')\r\n             {\r\n                 select02(&(h->parameter[par - 1]));\r\n@@ -396,33 +396,33 @@\n         }\r\n     }\r\n }\r\n \r\n-// �޸��ո������\r\n+// 修改收割机类型\r\n int changetype(int par)\r\n {\r\n     char choose;\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"������ѡ�����\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n \r\n     setfillstyle(1, YELLOW);\r\n     pieslice(200, 240, 0, 360, 20);\r\n-    puthz(175, 195, \"��ֱʽ\", 16, 16, BLUE);\r\n+    puthz(175, 195, \"垂直式\", 16, 16, BLUE);\r\n     pieslice(440, 240, 0, 360, 20);\r\n-    puthz(415, 195, \"ˮƽʽ\", 16, 16, BLUE);\r\n+    puthz(415, 195, \"水平式\", 16, 16, BLUE);\r\n \r\n     for (;;)\r\n     {\r\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n-        if (mouse_press(180, 220, 220, 260) == 1) // ��ֱʽ\r\n+        if (mouse_press(180, 220, 220, 260) == 1) // 垂直式\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'a';\r\n             setfillstyle(1, BROWN);\r\n@@ -431,9 +431,9 @@\n             pieslice(440, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(200, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(420, 220, 460, 260) == 1) // ˮƽʽ\r\n+        if (mouse_press(420, 220, 460, 260) == 1) // 水平式\r\n         {\r\n             clrmous(MouseX, MouseY);\r\n             choose = 'b';\r\n             setfillstyle(1, BROWN);\r\n@@ -442,35 +442,35 @@\n             pieslice(200, 240, 0, 360, 20);\r\n             setfillstyle(1, BLUE);\r\n             pieslice(440, 240, 0, 360, 20);\r\n         }\r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             h->parameter[par - 1].type = choose;\r\n             wr_h();\r\n             return 1;\r\n         }\r\n     }\r\n }\r\n \r\n-// �޸����\r\n+// 修改面积\r\n int changeS(int par)\r\n {\r\n     INPUT S = {245, 220, 445, 260, \"\", 6, 0, 0};\r\n     clrmous(MouseX, MouseY);\r\n     setfillstyle(1, BROWN);\r\n     bar(100, 130, 540, 370);\r\n-    puthz(220, 150, \"�������������\", 32, 32, BLUE);\r\n+    puthz(220, 150, \"请重新输入面积\", 32, 32, BLUE);\r\n     setfillstyle(1, CYAN);\r\n     bar(150, 290, 240, 340);\r\n-    puthz(153, 293, \"����\", 32, 32, BLUE);\r\n+    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n     bar(400, 290, 490, 340);\r\n-    puthz(403, 293, \"ȷ��\", 32, 32, BLUE);\r\n-    puthz(170, 220, \"�����\", 32, 32, BLUE);\r\n+    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n+    puthz(170, 220, \"面积：\", 32, 32, BLUE);\r\n     setfillstyle(1, 0);\r\n     bar(245, 220, 445, 260);\r\n \r\n     for (;;)\r\n@@ -478,13 +478,13 @@\n         delay(15);\r\n         newmouse(&MouseX, &MouseY, &press);\r\n         input_s(248, 220, &S, 16, 0);\r\n \r\n-        if (mouse_press(150, 290, 240, 340) == 1) // ����\r\n+        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n         {\r\n             return -1;\r\n         }\r\n-        if (mouse_press(400, 290, 490, 340) == 1) // ȷ��\r\n+        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n         {\r\n             strcpy(h->parameter[par - 1].S, S.string);\r\n             wr_h();\r\n             return 1;\r\n@@ -494,19 +494,19 @@\n \r\n void search(char *str)\r\n {\r\n     int i,j,k;\r\n-    int par[PAR];//���ȶ����飬�����һһ��Ӧ���޶�Ӧ��Ϊ0\r\n-    for (i = 0; i < h->lenpar; i++)//��i������\r\n+    int par[PAR];//优先度数组，与参数一一对应，无对应则为0\r\n+    for (i = 0; i < h->lenpar; i++)//第i个参数\r\n     {\r\n         par[i]=1;\r\n-        for (j=0;j<strlen(str);j++)//str�е�j���ַ�\r\n+        for (j=0;j<strlen(str);j++)//str中第j个字符\r\n         {\r\n-            for (k=0;k<strlen(h->parameter[i].name);k++)//��i�������е�k���ַ�\r\n+            for (k=0;k<strlen(h->parameter[i].name);k++)//第i个参数中第k个字符\r\n             {\r\n                 if (str[j]==h->parameter[i].name[k])\r\n                 {\r\n-                    par[i]+=1;//����ͬ���������ȶ�+1\r\n+                    par[i]+=1;//有相同的则其优先度+1\r\n                 }\r\n             }\r\n         }\r\n     }\r\n"
                }
            ],
            "date": 1681528502523,
            "name": "Commit-0",
            "content": "#include \"TOTAL.H\"\r\n// 专门用来写有关edit和past的函数\r\n\r\nint judgename(char name[])\r\n{\r\n    static int i, j;\r\n    if (name[0] == '\\0')\r\n    {\r\n        void *buffer;\r\n        unsigned s;\r\n        setfillstyle(1, CYAN);\r\n        bar(240, 30, 470, 70);\r\n        puthz(242, 33, \"参数名不能为空\", 32, 32, BLUE);\r\n        delay(1000);\r\n        setfillstyle(1, 0);\r\n        bar(240, 30, 470, 70);\r\n        puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n        return 0;\r\n    }\r\n    for (i = 0; i < h->lenpar; i++)\r\n    {\r\n        for (j = 0; j < 10; j++)\r\n        {\r\n            if (name[j] != (h->parameter[i]).name[j])\r\n            {\r\n                break;\r\n            }\r\n            if (name[j] == '\\0')\r\n            {\r\n                j = 10;\r\n                break;\r\n            }\r\n        }\r\n        if (j == 10)\r\n        {\r\n            setfillstyle(1, CYAN);\r\n            bar(240, 30, 470, 70);\r\n            puthz(242, 33, \"参数名已经存在\", 32, 32, BLUE);\r\n            delay(1000);\r\n            setfillstyle(1, 0);\r\n            bar(240, 30, 470, 70);\r\n            puthz(240, 30, \"请选择地区\", 32, 32, BLUE);\r\n\r\n            return 0;\r\n        }\r\n    }\r\n    return 1;\r\n}\r\n\r\nint judgeS(char S[])\r\n{\r\n    int i = 0;\r\n    if (S[0] == '\\0')\r\n    {\r\n        setfillstyle(1, CYAN);\r\n        bar(80, 100, 380, 140);\r\n        puthz(83, 100, \"土地面积不能为空\", 32, 32, BLUE);\r\n        delay(1000);\r\n        setfillstyle(1, 0);\r\n        bar(80, 100, 380, 140);\r\n        puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n        return 0;\r\n    }\r\n    for (i = 0; i < strlen(S); i++)\r\n    {\r\n        if (S[i] > '9' || S[i] < '0')\r\n        {\r\n            setfillstyle(1, CYAN);\r\n            bar(80, 100, 340, 140);\r\n            puthz(83, 100, \"请输入数字\", 32, 32, BLUE);\r\n            delay(1000);\r\n            setfillstyle(1, 0);\r\n            bar(80, 100, 340, 140);\r\n            puthz(70, 100, \"本地推荐种植的棉花种类为：\", 32, 32, BLUE);\r\n            return 0;\r\n        }\r\n    }\r\n    return 1;\r\n}\r\n\r\nvoid wr_parameter(struct Parameter *abc)\r\n{\r\n    FILE *fp;\r\n    user *u = (user *)malloc(sizeof(user));\r\n    int i, j, k, all;\r\n    if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n    {\r\n        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n        delay(3000);\r\n        return;\r\n    }\r\n    fseek(fp, 0, SEEK_END);\r\n    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n    for (i = 0; i < all; i++)\r\n    {\r\n        fseek(fp, i * sizeof(user), SEEK_SET);\r\n        fread(u, sizeof(user), 1, fp);\r\n        for (j = 0; j < 10; j++) // 查找账号位置\r\n        {\r\n\r\n            if (u->username[j] != h->username[j])\r\n            {\r\n                break;\r\n            }\r\n            if (h->username[j] == '\\0')\r\n            {\r\n                j = 10;\r\n                break;\r\n            }\r\n        }\r\n        if (j == 10) // 找到了就修改参数\r\n        {\r\n            // strcpy(h->parameter[h->lenpar].name,abc->name);\r\n            for (k = 0; k < 10; k++)\r\n            {\r\n                h->parameter[h->lenpar].name[k] = abc->name[k];\r\n            }\r\n            h->parameter[h->lenpar].place = abc->place;\r\n            h->parameter[h->lenpar].shape = abc->shape;\r\n            h->parameter[h->lenpar].type = abc->type;\r\n            strcpy(h->parameter[h->lenpar].S, abc->S);\r\n            for (k = 0; k < dense_points_max; k++)\r\n            {\r\n                h->parameter[h->lenpar].x[k] = abc->x[k];\r\n                h->parameter[h->lenpar].y[k] = abc->y[k];\r\n            }\r\n            h->parameter[h->lenpar].lenxy = abc->lenxy;\r\n            h->lenpar += 1;\r\n            fseek(fp, i * sizeof(user), SEEK_SET);\r\n            fwrite(h, sizeof(user), 1, fp);\r\n            puthz(220, 100, \"增加参数成功\", 32, 32, BLUE);\r\n            delay(2000);\r\n        }\r\n    }\r\n    // char name[10];//名字\r\n    // char place;//产区\r\n    // char shape;//土地形状\r\n    // char type;//收割机类型\r\n    // int S;//面积\r\n    // int xyz[200];//坐标\r\n\r\n    free(u);\r\n    u = NULL;\r\n    fclose(fp);\r\n    return;\r\n}\r\n\r\n// 把当前登录的用户重新写进文件\r\nvoid wr_h(void)\r\n{\r\n    FILE *fp;\r\n    user *u = (user *)malloc(sizeof(user));\r\n    int i, j, k, all;\r\n    if ((fp = fopen(\"User.dat\", \"rb+\")) == NULL)\r\n    {\r\n        puthz(120, 300, \"打开错误\", 32, 32, BLUE);\r\n        delay(3000);\r\n        return;\r\n    }\r\n    fseek(fp, 0, SEEK_END);\r\n    all = ftell(fp) / sizeof(user); // 文件里user的数量\r\n    for (i = 0; i < all; i++)\r\n    {\r\n        fseek(fp, i * sizeof(user), SEEK_SET);\r\n        fread(u, sizeof(user), 1, fp);\r\n        for (j = 0; j < 10; j++)\r\n        {\r\n\r\n            if (u->username[j] != h->username[j])\r\n            {\r\n                break;\r\n            }\r\n            if (h->username[j] == '\\0')\r\n            {\r\n                j = 10;\r\n                break;\r\n            }\r\n        }\r\n        if (j == 10) // 找到了就把h传进去\r\n        {\r\n            fseek(fp, i * sizeof(user), SEEK_SET);\r\n            fwrite(h, sizeof(user), 1, fp);\r\n        }\r\n    }\r\n\r\n    free(u);\r\n    u = NULL;\r\n    fclose(fp);\r\n    return;\r\n}\r\n\r\n// 删除参数\r\nvoid deletepar(int par)\r\n{\r\n    int i, j, k;\r\n    par -= 1;\r\n    for (i = par; i < h->lenpar; i++)\r\n    {\r\n        for (j = 0; j < 10; j++)\r\n        {\r\n            h->parameter[par].name[j] = h->parameter[par + 1].name[j];\r\n        }\r\n        h->parameter[par].place = h->parameter[par + 1].place;\r\n        h->parameter[par].shape = h->parameter[par + 1].shape;\r\n        h->parameter[par].type = h->parameter[par + 1].type;\r\n        strcpy(h->parameter[par].S, h->parameter[par + 1].S);\r\n        for (k = 0; k < dense_points_max; k++)\r\n        {\r\n            h->parameter[par].x[k] = h->parameter[par + 1].x[k];\r\n            h->parameter[par].y[k] = h->parameter[par + 1].y[k];\r\n        }\r\n        h->parameter[par].lenxy = h->parameter[par + 1].lenxy;\r\n    }\r\n    h->lenpar -= 1;\r\n    wr_h();\r\n}\r\n\r\n// 下面四个返回1为修改成功，返回-1为无修改\r\n\r\n// 修改产区\r\nint changeplace(int par)\r\n{\r\n    char choose;\r\n    clrmous(MouseX, MouseY);\r\n    setfillstyle(1, BROWN);\r\n    bar(100, 130, 540, 370);\r\n    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n    setfillstyle(1, CYAN);\r\n    bar(150, 290, 240, 340);\r\n    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n    bar(400, 290, 490, 340);\r\n    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n\r\n    setfillstyle(1, LIGHTRED);\r\n    bar(305, 240, 335, 270);\r\n    puthz(300, 200, \"长江\", 16, 16, BLUE);\r\n    bar(180, 240, 210, 270);\r\n    puthz(175, 200, \"新疆\", 16, 16, BLUE);\r\n    bar(430, 240, 460, 270);\r\n    puthz(425, 200, \"黄河\", 16, 16, BLUE);\r\n\r\n    quit();\r\n\r\n    for (;;)\r\n    {\r\n        delay(15);\r\n        newmouse(&MouseX, &MouseY, &press);\r\n\r\n        if (mouse_press(305, 240, 335, 270) == 1) // 长江\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'c';\r\n            setfillstyle(1, BROWN);\r\n            bar(180, 240, 460, 270);\r\n            setfillstyle(1, BLUE);\r\n            bar(305, 240, 335, 270);\r\n            setfillstyle(1, LIGHTRED);\r\n            bar(180, 240, 210, 270);\r\n            bar(430, 240, 460, 270);\r\n        }\r\n        if (mouse_press(180, 240, 210, 270) == 1) // 新疆\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'a';\r\n            setfillstyle(1, BROWN);\r\n            bar(180, 240, 460, 270);\r\n            setfillstyle(1, BLUE);\r\n            bar(180, 240, 210, 270);\r\n            setfillstyle(1, LIGHTRED);\r\n            bar(305, 240, 335, 270);\r\n            bar(430, 240, 460, 270);\r\n        }\r\n        if (mouse_press(430, 240, 460, 270) == 1) // 黄河\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'b';\r\n            setfillstyle(1, BROWN);\r\n            bar(180, 240, 460, 270);\r\n            setfillstyle(1, BLUE);\r\n            bar(430, 240, 460, 270);\r\n            setfillstyle(1, LIGHTRED);\r\n            bar(180, 240, 210, 270);\r\n            bar(305, 240, 335, 270);\r\n        }\r\n\r\n        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n        {\r\n            return -1;\r\n        }\r\n        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n        {\r\n            h->parameter[par - 1].place = choose;\r\n            wr_h();\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\n// 修改土地形状\r\nint changeshape(int par)\r\n{\r\n    char choose;\r\n    clrmous(MouseX, MouseY);\r\n    setfillstyle(1, BROWN);\r\n    bar(100, 130, 540, 370);\r\n    puthz(200, 150, \"请重新选择土地形状\", 32, 32, BLUE);\r\n    setfillstyle(1, CYAN);\r\n    bar(150, 290, 240, 340);\r\n    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n    bar(400, 290, 490, 340);\r\n    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n\r\n    setfillstyle(1, YELLOW);\r\n    pieslice(170, 240, 0, 360, 20);\r\n    puthz(155, 195, \"矩形\", 16, 16, BLUE);\r\n    pieslice(270, 240, 0, 360, 20);\r\n    puthz(255, 195, \"圆形\", 16, 16, BLUE);\r\n    pieslice(370, 240, 0, 360, 20);\r\n    puthz(340, 195, \"多边形\", 16, 16, BLUE);\r\n    pieslice(470, 240, 0, 360, 20);\r\n    puthz(425, 195, \"自定义图形\", 16, 16, BLUE);\r\n\r\n    for (;;)\r\n    {\r\n        delay(15);\r\n        newmouse(&MouseX, &MouseY, &press);\r\n        if (mouse_press(150, 220, 190, 360) == 1) // 矩形\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'a';\r\n            setfillstyle(1, BROWN);\r\n            bar(150, 220, 490, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(270, 240, 0, 360, 20);\r\n            pieslice(370, 240, 0, 360, 20);\r\n            pieslice(470, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(170, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(250, 220, 290, 360) == 1) // 圆形\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'b';\r\n            setfillstyle(1, BROWN);\r\n            bar(150, 220, 490, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(170, 240, 0, 360, 20);\r\n            pieslice(370, 240, 0, 360, 20);\r\n            pieslice(470, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(270, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(350, 220, 390, 360) == 1) // 多边形\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'c';\r\n            setfillstyle(1, BROWN);\r\n            bar(150, 220, 490, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(270, 240, 0, 360, 20);\r\n            pieslice(170, 240, 0, 360, 20);\r\n            pieslice(470, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(370, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(450, 220, 490, 360) == 1) // 自定义图形\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'd';\r\n            setfillstyle(1, BROWN);\r\n            bar(150, 220, 490, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(270, 240, 0, 360, 20);\r\n            pieslice(370, 240, 0, 360, 20);\r\n            pieslice(170, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(470, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n        {\r\n            return -1;\r\n        }\r\n        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n        {\r\n            if (choose == 'c')\r\n            {\r\n                select02(&(h->parameter[par - 1]));\r\n            }\r\n            else if (choose == 'd')\r\n            {\r\n                select03(&(h->parameter[par - 1]));\r\n            }\r\n            h->parameter[par - 1].shape = choose;\r\n            wr_h();\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\n// 修改收割机类型\r\nint changetype(int par)\r\n{\r\n    char choose;\r\n    clrmous(MouseX, MouseY);\r\n    setfillstyle(1, BROWN);\r\n    bar(100, 130, 540, 370);\r\n    puthz(220, 150, \"请重新选择产区\", 32, 32, BLUE);\r\n    setfillstyle(1, CYAN);\r\n    bar(150, 290, 240, 340);\r\n    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n    bar(400, 290, 490, 340);\r\n    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n\r\n    setfillstyle(1, YELLOW);\r\n    pieslice(200, 240, 0, 360, 20);\r\n    puthz(175, 195, \"垂直式\", 16, 16, BLUE);\r\n    pieslice(440, 240, 0, 360, 20);\r\n    puthz(415, 195, \"水平式\", 16, 16, BLUE);\r\n\r\n    for (;;)\r\n    {\r\n        delay(15);\r\n        newmouse(&MouseX, &MouseY, &press);\r\n        if (mouse_press(180, 220, 220, 260) == 1) // 垂直式\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'a';\r\n            setfillstyle(1, BROWN);\r\n            bar(180, 220, 460, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(440, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(200, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(420, 220, 460, 260) == 1) // 水平式\r\n        {\r\n            clrmous(MouseX, MouseY);\r\n            choose = 'b';\r\n            setfillstyle(1, BROWN);\r\n            bar(180, 220, 460, 260);\r\n            setfillstyle(1, YELLOW);\r\n            pieslice(200, 240, 0, 360, 20);\r\n            setfillstyle(1, BLUE);\r\n            pieslice(440, 240, 0, 360, 20);\r\n        }\r\n        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n        {\r\n            return -1;\r\n        }\r\n        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n        {\r\n            h->parameter[par - 1].type = choose;\r\n            wr_h();\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\n// 修改面积\r\nint changeS(int par)\r\n{\r\n    INPUT S = {245, 220, 445, 260, \"\", 6, 0, 0};\r\n    clrmous(MouseX, MouseY);\r\n    setfillstyle(1, BROWN);\r\n    bar(100, 130, 540, 370);\r\n    puthz(220, 150, \"请重新输入面积\", 32, 32, BLUE);\r\n    setfillstyle(1, CYAN);\r\n    bar(150, 290, 240, 340);\r\n    puthz(153, 293, \"返回\", 32, 32, BLUE);\r\n    bar(400, 290, 490, 340);\r\n    puthz(403, 293, \"确认\", 32, 32, BLUE);\r\n    puthz(170, 220, \"面积：\", 32, 32, BLUE);\r\n    setfillstyle(1, 0);\r\n    bar(245, 220, 445, 260);\r\n\r\n    for (;;)\r\n    {\r\n        delay(15);\r\n        newmouse(&MouseX, &MouseY, &press);\r\n        input_s(248, 220, &S, 16, 0);\r\n\r\n        if (mouse_press(150, 290, 240, 340) == 1) // 返回\r\n        {\r\n            return -1;\r\n        }\r\n        if (mouse_press(400, 290, 490, 340) == 1) // 确认\r\n        {\r\n            strcpy(h->parameter[par - 1].S, S.string);\r\n            wr_h();\r\n            return 1;\r\n        }\r\n    }\r\n}\r\n\r\nvoid search(char *str)\r\n{\r\n    \r\n}"
        }
    ]
}