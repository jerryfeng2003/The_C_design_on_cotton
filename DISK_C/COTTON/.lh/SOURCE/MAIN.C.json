{
    "sourceFile": "SOURCE/MAIN.C",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1681384543009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1681384558446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n #include \"TOTAL.H\"\r\n-struct User *h;//��¼���û�\r\n+struct User *h;//登录的用户\r\n int mode=0;\r\n int mode1=0;\r\n \r\n int main()\r\n {\r\n     int gd=VGA,gm=VGAHI;\r\n-\th=(user*)malloc(sizeof(user));//��¼���û�\r\n+\th=(user*)malloc(sizeof(user));//登录的用户\r\n \tinitgraph(&gd,&gm,\"..\\\\borlandc\\\\bgi\");\r\n     loginit();\r\n     while(1)\r\n     {\r\n@@ -170,30 +170,30 @@\n void quit(void)\r\n {\r\n     setfillstyle(1,LIGHTBLUE);\r\n     bar(0,0,40,30);\r\n-\tputhz(3,10,\"�˳�\",16,16,WHITE);\r\n+\tputhz(3,10,\"退出\",16,16,WHITE);\r\n }\r\n \r\n void skip(void)\r\n {\r\n     setfillstyle(1,LIGHTBLUE);\r\n     bar(585,450,625,480);\r\n-    puthz(625-40+3,480-30+10,\"����\",16,16,WHITE);\r\n+    puthz(625-40+3,480-30+10,\"跳过\",16,16,WHITE);\r\n }\r\n \r\n void next(void)\r\n {\r\n     setfillstyle(1,LIGHTBLUE);\r\n     bar(585,450,625,480);\r\n-    puthz(625-40+3,480-30+10,\"��ҳ\",16,16,WHITE);\r\n+    puthz(625-40+3,480-30+10,\"下页\",16,16,WHITE);\r\n }\r\n \r\n void last(void)\r\n {\r\n     setfillstyle(1,LIGHTBLUE);\r\n     bar(0,450,40,480);\r\n-    puthz(4,480-30+10,\"����\",16,16,WHITE);\r\n+    puthz(4,480-30+10,\"返回\",16,16,WHITE);\r\n }\r\n \r\n /*void text_input(char *str,int x1,int y1,int x2,int y2,int t_x,int t_y,int t_size)\r\n {\r\n@@ -229,9 +229,9 @@\n \t}\r\n }*/\r\n \r\n void input_text(char *id, int x, int y, int charnum, int color, int flag)\r\n-{ // flag==1  ��ʾ\r\n+{ // flag==1  显示\r\n \r\n #define h 32\r\n #define w 18\r\n #define space 0\r\n@@ -268,11 +268,11 @@\n                 if (t != '\\b')\r\n                 {\r\n                     *(id + i) = t;\r\n                     *(id + i + 1) = '\\0';\r\n-                    bar(SX+i*w-1+space,SY - 1,SX +i*w+1+space,SY+h); //�ڸǹ��\r\n+                    bar(SX+i*w-1+space,SY - 1,SX +i*w+1+space,SY+h); //遮盖光标\r\n                     if (flag)\r\n-                        outtextxy(SX + i * 18, SY, id + i); //�����������ַ�t\r\n+                        outtextxy(SX + i * 18, SY, id + i); //输出刚输入的字符t\r\n                     else\r\n                     {\r\n                         outtextxy(SX + i * 18, SY, \"*\");\r\n                     }\r\n@@ -280,19 +280,19 @@\n                     line(SX + i * w + space, SY, SX +i*w +space,SY+h);\r\n                 }\r\n                 else if (t == '\\b' && i > 0)\r\n                 {\r\n-                    bar(SX+i*w-1+space,SY-1,SX+i*w+1+space,SY+h); //�ڸǹ��\r\n-                    i--;                                             //����һ������\r\n-                    bar(SX+i*w,SY,SX + i * w + w, SY + h);            //�ڸ�����\r\n-                    line(SX+i*w+space, SY, SX + i * w + space, SY + h); //���ƹ��\r\n+                    bar(SX+i*w-1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n+                    i--;                                             //减少一个字数\r\n+                    bar(SX+i*w,SY,SX + i * w + w, SY + h);            //遮盖文字\r\n+                    line(SX+i*w+space, SY, SX + i * w + space, SY + h); //绘制光标\r\n                     *(id + i) = '\\0';\r\n                     *(id + i + 1) = '\\0';\r\n                 }\r\n             }\r\n             else\r\n             {\r\n-                bar(SX+i * w - 1 + space,SY - 1, SX + i * w + 1+ space, SY+ h); //�ڸǹ��\r\n+                bar(SX+i * w - 1 + space,SY - 1, SX + i * w + 1+ space, SY+ h); //遮盖光标\r\n                 break;\r\n             }\r\n         }\r\n         else\r\n@@ -300,19 +300,19 @@\n             if (t!='\\n'&&t!='\\r' && t != ' '&&t!=033)\r\n             { // 033:Esc\r\n                 if (t == '\\b' && i > 0)\r\n                 {\r\n-                    bar(SX+i*w-1+space,SY-1,SX + i * w + 1 + space, SY + h); //�ڸǹ��\r\n-                    i--;                                                                 //����һ������\r\n-                    bar(SX + i * w, SY, SX + i *w+w,SY+h);                         //�ڸ�����\r\n-                    line(SX + i * w + space, SY, SX + i * w + space,SY + h);            //���ƹ��\r\n+                    bar(SX+i*w-1+space,SY-1,SX + i * w + 1 + space, SY + h); //遮盖光标\r\n+                    i--;                                                                 //减少一个字数\r\n+                    bar(SX + i * w, SY, SX + i *w+w,SY+h);                         //遮盖文字\r\n+                    line(SX + i * w + space, SY, SX + i * w + space,SY + h);            //绘制光标\r\n                     *(id + i) = '\\0';\r\n                     *(id + i + 1) = '\\0';\r\n                 }\r\n             }\r\n             else\r\n             {\r\n-                bar(SX+i*w -1+space,SY-1,SX+i*w+1+space,SY+h); //�ڸǹ��\r\n+                bar(SX+i*w -1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n                 break;\r\n             }\r\n         }\r\n     }\r\n"
                },
                {
                    "date": 1681450166394,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,332 @@\n+#include \"TOTAL.H\"\r\n+struct User *h;//登录的用户\r\n+int mode=0;\r\n+int mode1=0;\r\n+\r\n+// int main()\r\n+// {\r\n+//     int gd=VGA,gm=VGAHI;\r\n+// \th=(user*)malloc(sizeof(user));//登录的用户\r\n+// \tinitgraph(&gd,&gm,\"..\\\\borlandc\\\\bgi\");\r\n+//     loginit();\r\n+//     while(1)\r\n+//     {\r\n+//         int pre_mode=mode,pre_mode1=mode1;\r\n+//         switch (mode)\r\n+//         {\r\n+//             case 0:  //the welcome page\r\n+//             {\r\n+//                 draw_wel();\r\n+//                 break;\r\n+//             }\r\n+\r\n+//             case 1: //the home page\r\n+//             {\r\n+\r\n+//                 switch(mode1)\r\n+//                 {\r\n+//                     case -1:\r\n+//                     {\r\n+//                         // draw_home01();\r\n+//                         mode1=0;\r\n+//                         break;\r\n+//                     }\r\n+//                     case 0: //the home main page\r\n+//                     {\r\n+//                         draw_home01();\r\n+//                         break;\r\n+//                     }\r\n+//                     case 1: //the warehouse list page\r\n+//                     {\r\n+//                         warehouse_list(h->here);\r\n+//                         break;\r\n+//                     }\r\n+//                     case 2: //the detailed warehouse page\r\n+//                     {\r\n+//                         detailed_warehouse(h->here[k].total[(h->here[k].cotton_type)]);\r\n+//                         break;\r\n+//                     }\r\n+//                     case 3: //the export cotton page\r\n+//                     {\r\n+//                         out_warehouse();\r\n+//                         break;\r\n+//                     }\r\n+//                 }\r\n+//                 break;\r\n+//             }\r\n+//             case 2: //the edit page\r\n+//             {\r\n+//                 edit();\r\n+//                 pre_mode=2;\r\n+//                 mode=2;\r\n+//                 break;\r\n+//             }\r\n+\r\n+//             case 3: // the start page\r\n+//             {\r\n+//                 start();\r\n+//                 pre_mode=3;\r\n+//                 mode=3;\r\n+//                 break;\r\n+//             }\r\n+\r\n+//             case 4: //the past page\r\n+//             {\r\n+//                 past(); \r\n+//                 pre_mode=4;\r\n+//                 mode=4;  \r\n+//                 break;\r\n+//             }\r\n+\r\n+//             case 5:  //the help page\r\n+//             {\r\n+//                 draw_help01();\r\n+//                 break;\r\n+//             }\r\n+            \r\n+//             default:\r\n+//                 break;\r\n+//         }\r\n+//         while(pre_mode==mode&&pre_mode1==mode1)\r\n+//         {\r\n+//             newmouse(&MouseX,&MouseY,&press);\r\n+//             switch (mode)\r\n+//             {\r\n+//                 case 0:  //the welcome page\r\n+//                 {\r\n+//                     enter_next();\r\n+//                     break;\r\n+//                 }\r\n+\r\n+//                 case 1: //the home page\r\n+//                 {\r\n+//                     switch(mode1)\r\n+//                     {\r\n+//                         case -1: //refresh the home main page\r\n+//                         {\r\n+//                             // press_home(&(here[k].cotton_type));\r\n+//                             mode1=0;\r\n+//                             break;\r\n+//                         }\r\n+//                         case 0: //the home main page\r\n+//                         {\r\n+//                             press_home(&(h->here[k].cotton_type));\r\n+//                             break;\r\n+//                         }\r\n+//                         case 1: //the warehouse list page\r\n+//                         {\r\n+//                             press_warelist();\r\n+//                             break;\r\n+//                         }\r\n+//                         case 2: //the detailed warehouse page\r\n+//                         {\r\n+//                             press_detwarehouse();\r\n+//                             break;\r\n+//                         }\r\n+//                         case 3: //the export cotton page\r\n+//                         {\r\n+//                             press_outware();\r\n+//                             break;\r\n+//                         }\r\n+//                     }\r\n+//                     break;\r\n+//                 }\r\n+//                 case 2: //the edit page\r\n+//                 {\r\n+//                     cleardevice();\r\n+//                     mode=0;\r\n+//                     break;\r\n+//                 }\r\n+\r\n+//                 case 3: // the start page\r\n+//                 {\r\n+//                     cleardevice();\r\n+//                     mode=0;\r\n+//                     break;\r\n+//                 }\r\n+\r\n+//                 case 4: //the past page\r\n+//                 {\r\n+//                     cleardevice();\r\n+//                     mode=0;\r\n+//                     break;\r\n+//                 }\r\n+\r\n+//                 case 5:  //the help page\r\n+//                 {\r\n+//                     cleardevice();\r\n+//                     mode=0;\r\n+//                     break;\r\n+//                 }            \r\n+//                 default:\r\n+//                     break;\r\n+//             }\r\n+//             delay(20);\r\n+//         }\r\n+//     }\r\n+//     free(h);\r\n+// }\r\n+\r\n+void quit(void)\r\n+{\r\n+    setfillstyle(1,LIGHTBLUE);\r\n+    bar(0,0,40,30);\r\n+\tputhz(3,10,\"退出\",16,16,WHITE);\r\n+}\r\n+\r\n+void skip(void)\r\n+{\r\n+    setfillstyle(1,LIGHTBLUE);\r\n+    bar(585,450,625,480);\r\n+    puthz(625-40+3,480-30+10,\"跳过\",16,16,WHITE);\r\n+}\r\n+\r\n+void next(void)\r\n+{\r\n+    setfillstyle(1,LIGHTBLUE);\r\n+    bar(585,450,625,480);\r\n+    puthz(625-40+3,480-30+10,\"下页\",16,16,WHITE);\r\n+}\r\n+\r\n+void last(void)\r\n+{\r\n+    setfillstyle(1,LIGHTBLUE);\r\n+    bar(0,450,40,480);\r\n+    puthz(4,480-30+10,\"返回\",16,16,WHITE);\r\n+}\r\n+\r\n+/*void text_input(char *str,int x1,int y1,int x2,int y2,int t_x,int t_y,int t_size)\r\n+{\r\n+\tchar temp,*p;\r\n+\tint i, n=t_x,get,arr[10]={p_0,p_1,p_2,p_4,p_5,p_6,p_7,p_8,p_9};\r\n+\tclrmous(MouseX,MouseY);\r\n+\tp=str;\r\n+\tsetfillstyle(1,WHITE);\r\n+\tsetcolor(DARKGRAY);\r\n+\tbar(x1,y1,x2,y2);\r\n+\twhile(bioskey(1))\r\n+\t{\r\n+\t\tget=bioskey(0);\r\n+\t}\r\n+\twhile(*p!='\\0')\r\n+\t{\r\n+\t\tif (get==p_Enter)\r\n+\t\t{\r\n+\t\t\tbreak;\r\n+\t\t}\r\n+\t\tfor(i=0;i<10;i++)\r\n+\t\t{\r\n+\t\t\tif(arr[i]==get)\r\n+\t\t\t{\r\n+\t\t\t\ttemp=i+'0';\r\n+\t\t\t}\r\n+\t\t}\r\n+\t\t*p=temp;\r\n+\t\tp++;\r\n+\t\touttextxy(n,t_y,&temp);\r\n+\t\tget=bioskey(0);\r\n+\t\tn+=t_size;\r\n+\t}\r\n+}*/\r\n+\r\n+void input_text(char *id, int x, int y, int charnum, int color, int flag)\r\n+{ // flag==1  显示\r\n+\r\n+#define h 32\r\n+#define w 18\r\n+#define space 0\r\n+#define SX x + 5 // START X\r\n+#define SY y - 5\r\n+\r\n+    //int k = 0;\r\n+\r\n+    int i = 0;\r\n+    char t;\r\n+    clrmous(MouseX, MouseY);\r\n+    setfillstyle(SOLID_FILL, color);\r\n+    setlinestyle(SOLID_LINE, 0, NORM_WIDTH);\r\n+    setcolor(DARKGRAY);\r\n+    settextstyle(TRIPLEX_FONT, HORIZ_DIR, 4);\r\n+    settextjustify(LEFT_TEXT, TOP_TEXT);\r\n+\r\n+    while (bioskey(1))\r\n+    {\r\n+        t = bioskey(0);\r\n+    }\r\n+\r\n+    while (*(id + i) != '\\0')\r\n+        i++;\r\n+    line(SX+i*w,SY,SX+i*w,SY+h);\r\n+    while (1)\r\n+    {\r\n+\t\tsetfillstyle(1,WHITE);\r\n+        t = bioskey(0);\r\n+        if (i<charnum)\r\n+        {\r\n+            if (t!='\\n'&& t!='\\r'&&t !=' '&& t != 033)\r\n+            { // 033:Esc\r\n+                if (t != '\\b')\r\n+                {\r\n+                    *(id + i) = t;\r\n+                    *(id + i + 1) = '\\0';\r\n+                    bar(SX+i*w-1+space,SY - 1,SX +i*w+1+space,SY+h); //遮盖光标\r\n+                    if (flag)\r\n+                        outtextxy(SX + i * 18, SY, id + i); //输出刚输入的字符t\r\n+                    else\r\n+                    {\r\n+                        outtextxy(SX + i * 18, SY, \"*\");\r\n+                    }\r\n+                    i++;\r\n+                    line(SX + i * w + space, SY, SX +i*w +space,SY+h);\r\n+                }\r\n+                else if (t == '\\b' && i > 0)\r\n+                {\r\n+                    bar(SX+i*w-1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n+                    i--;                                             //减少一个字数\r\n+                    bar(SX+i*w,SY,SX + i * w + w, SY + h);            //遮盖文字\r\n+                    line(SX+i*w+space, SY, SX + i * w + space, SY + h); //绘制光标\r\n+                    *(id + i) = '\\0';\r\n+                    *(id + i + 1) = '\\0';\r\n+                }\r\n+            }\r\n+            else\r\n+            {\r\n+                bar(SX+i * w - 1 + space,SY - 1, SX + i * w + 1+ space, SY+ h); //遮盖光标\r\n+                break;\r\n+            }\r\n+        }\r\n+        else\r\n+        {\r\n+            if (t!='\\n'&&t!='\\r' && t != ' '&&t!=033)\r\n+            { // 033:Esc\r\n+                if (t == '\\b' && i > 0)\r\n+                {\r\n+                    bar(SX+i*w-1+space,SY-1,SX + i * w + 1 + space, SY + h); //遮盖光标\r\n+                    i--;                                                                 //减少一个字数\r\n+                    bar(SX + i * w, SY, SX + i *w+w,SY+h);                         //遮盖文字\r\n+                    line(SX + i * w + space, SY, SX + i * w + space,SY + h);            //绘制光标\r\n+                    *(id + i) = '\\0';\r\n+                    *(id + i + 1) = '\\0';\r\n+                }\r\n+            }\r\n+            else\r\n+            {\r\n+                bar(SX+i*w -1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n+                break;\r\n+            }\r\n+        }\r\n+    }\r\n+    //return i;\r\n+}\r\n+\r\n+/*int ch_to_int(char *str)\r\n+{\r\n+\tint out=0;\r\n+\tchar *p=str;\r\n+\twhile(*p!='\\0')\r\n+\t{\r\n+\t\tout*=10;\r\n+\t\tout+=*p-'0';\r\n+\t}\r\n+\treturn out;\r\n+}*/\n\\ No newline at end of file\n"
                }
            ],
            "date": 1681384543009,
            "name": "Commit-0",
            "content": "#include \"TOTAL.H\"\r\nstruct User *h;//登录的用户\r\nint mode=0;\r\nint mode1=0;\r\n\r\nint main()\r\n{\r\n    int gd=VGA,gm=VGAHI;\r\n\th=(user*)malloc(sizeof(user));//登录的用户\r\n\tinitgraph(&gd,&gm,\"..\\\\borlandc\\\\bgi\");\r\n    //loginit();\r\n    while(1)\r\n    {\r\n        int pre_mode=mode,pre_mode1=mode1;\r\n        switch (mode)\r\n        {\r\n            case 0:  //the welcome page\r\n            {\r\n                draw_wel();\r\n                break;\r\n            }\r\n\r\n            case 1: //the home page\r\n            {\r\n\r\n                switch(mode1)\r\n                {\r\n                    case -1:\r\n                    {\r\n                        // draw_home01();\r\n                        mode1=0;\r\n                        break;\r\n                    }\r\n                    case 0: //the home main page\r\n                    {\r\n                        draw_home01();\r\n                        break;\r\n                    }\r\n                    case 1: //the warehouse list page\r\n                    {\r\n                        warehouse_list(h->here);\r\n                        break;\r\n                    }\r\n                    case 2: //the detailed warehouse page\r\n                    {\r\n                        detailed_warehouse(h->here[k].total[(h->here[k].cotton_type)]);\r\n                        break;\r\n                    }\r\n                    case 3: //the export cotton page\r\n                    {\r\n                        out_warehouse();\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case 2: //the edit page\r\n            {\r\n                edit();\r\n                pre_mode=2;\r\n                mode=2;\r\n                break;\r\n            }\r\n\r\n            case 3: // the start page\r\n            {\r\n                start();\r\n                pre_mode=3;\r\n                mode=3;\r\n                break;\r\n            }\r\n\r\n            case 4: //the past page\r\n            {\r\n                past(); \r\n                pre_mode=4;\r\n                mode=4;  \r\n                break;\r\n            }\r\n\r\n            case 5:  //the help page\r\n            {\r\n                draw_help01();\r\n                break;\r\n            }\r\n            \r\n            default:\r\n                break;\r\n        }\r\n        while(pre_mode==mode&&pre_mode1==mode1)\r\n        {\r\n            newmouse(&MouseX,&MouseY,&press);\r\n            switch (mode)\r\n            {\r\n                case 0:  //the welcome page\r\n                {\r\n                    enter_next();\r\n                    break;\r\n                }\r\n\r\n                case 1: //the home page\r\n                {\r\n                    switch(mode1)\r\n                    {\r\n                        case -1: //refresh the home main page\r\n                        {\r\n                            // press_home(&(here[k].cotton_type));\r\n                            mode1=0;\r\n                            break;\r\n                        }\r\n                        case 0: //the home main page\r\n                        {\r\n                            press_home(&(h->here[k].cotton_type));\r\n                            break;\r\n                        }\r\n                        case 1: //the warehouse list page\r\n                        {\r\n                            press_warelist();\r\n                            break;\r\n                        }\r\n                        case 2: //the detailed warehouse page\r\n                        {\r\n                            press_detwarehouse();\r\n                            break;\r\n                        }\r\n                        case 3: //the export cotton page\r\n                        {\r\n                            press_outware();\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 2: //the edit page\r\n                {\r\n                    cleardevice();\r\n                    mode=0;\r\n                    break;\r\n                }\r\n\r\n                case 3: // the start page\r\n                {\r\n                    cleardevice();\r\n                    mode=0;\r\n                    break;\r\n                }\r\n\r\n                case 4: //the past page\r\n                {\r\n                    cleardevice();\r\n                    mode=0;\r\n                    break;\r\n                }\r\n\r\n                case 5:  //the help page\r\n                {\r\n                    cleardevice();\r\n                    mode=0;\r\n                    break;\r\n                }            \r\n                default:\r\n                    break;\r\n            }\r\n            delay(20);\r\n        }\r\n    }\r\n    free(h);\r\n}\r\n\r\nvoid quit(void)\r\n{\r\n    setfillstyle(1,LIGHTBLUE);\r\n    bar(0,0,40,30);\r\n\tputhz(3,10,\"退出\",16,16,WHITE);\r\n}\r\n\r\nvoid skip(void)\r\n{\r\n    setfillstyle(1,LIGHTBLUE);\r\n    bar(585,450,625,480);\r\n    puthz(625-40+3,480-30+10,\"跳过\",16,16,WHITE);\r\n}\r\n\r\nvoid next(void)\r\n{\r\n    setfillstyle(1,LIGHTBLUE);\r\n    bar(585,450,625,480);\r\n    puthz(625-40+3,480-30+10,\"下页\",16,16,WHITE);\r\n}\r\n\r\nvoid last(void)\r\n{\r\n    setfillstyle(1,LIGHTBLUE);\r\n    bar(0,450,40,480);\r\n    puthz(4,480-30+10,\"返回\",16,16,WHITE);\r\n}\r\n\r\n/*void text_input(char *str,int x1,int y1,int x2,int y2,int t_x,int t_y,int t_size)\r\n{\r\n\tchar temp,*p;\r\n\tint i, n=t_x,get,arr[10]={p_0,p_1,p_2,p_4,p_5,p_6,p_7,p_8,p_9};\r\n\tclrmous(MouseX,MouseY);\r\n\tp=str;\r\n\tsetfillstyle(1,WHITE);\r\n\tsetcolor(DARKGRAY);\r\n\tbar(x1,y1,x2,y2);\r\n\twhile(bioskey(1))\r\n\t{\r\n\t\tget=bioskey(0);\r\n\t}\r\n\twhile(*p!='\\0')\r\n\t{\r\n\t\tif (get==p_Enter)\r\n\t\t{\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i=0;i<10;i++)\r\n\t\t{\r\n\t\t\tif(arr[i]==get)\r\n\t\t\t{\r\n\t\t\t\ttemp=i+'0';\r\n\t\t\t}\r\n\t\t}\r\n\t\t*p=temp;\r\n\t\tp++;\r\n\t\touttextxy(n,t_y,&temp);\r\n\t\tget=bioskey(0);\r\n\t\tn+=t_size;\r\n\t}\r\n}*/\r\n\r\nvoid input_text(char *id, int x, int y, int charnum, int color, int flag)\r\n{ // flag==1  显示\r\n\r\n#define h 32\r\n#define w 18\r\n#define space 0\r\n#define SX x + 5 // START X\r\n#define SY y - 5\r\n\r\n    //int k = 0;\r\n\r\n    int i = 0;\r\n    char t;\r\n    clrmous(MouseX, MouseY);\r\n    setfillstyle(SOLID_FILL, color);\r\n    setlinestyle(SOLID_LINE, 0, NORM_WIDTH);\r\n    setcolor(DARKGRAY);\r\n    settextstyle(TRIPLEX_FONT, HORIZ_DIR, 4);\r\n    settextjustify(LEFT_TEXT, TOP_TEXT);\r\n\r\n    while (bioskey(1))\r\n    {\r\n        t = bioskey(0);\r\n    }\r\n\r\n    while (*(id + i) != '\\0')\r\n        i++;\r\n    line(SX+i*w,SY,SX+i*w,SY+h);\r\n    while (1)\r\n    {\r\n\t\tsetfillstyle(1,WHITE);\r\n        t = bioskey(0);\r\n        if (i<charnum)\r\n        {\r\n            if (t!='\\n'&& t!='\\r'&&t !=' '&& t != 033)\r\n            { // 033:Esc\r\n                if (t != '\\b')\r\n                {\r\n                    *(id + i) = t;\r\n                    *(id + i + 1) = '\\0';\r\n                    bar(SX+i*w-1+space,SY - 1,SX +i*w+1+space,SY+h); //遮盖光标\r\n                    if (flag)\r\n                        outtextxy(SX + i * 18, SY, id + i); //输出刚输入的字符t\r\n                    else\r\n                    {\r\n                        outtextxy(SX + i * 18, SY, \"*\");\r\n                    }\r\n                    i++;\r\n                    line(SX + i * w + space, SY, SX +i*w +space,SY+h);\r\n                }\r\n                else if (t == '\\b' && i > 0)\r\n                {\r\n                    bar(SX+i*w-1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n                    i--;                                             //减少一个字数\r\n                    bar(SX+i*w,SY,SX + i * w + w, SY + h);            //遮盖文字\r\n                    line(SX+i*w+space, SY, SX + i * w + space, SY + h); //绘制光标\r\n                    *(id + i) = '\\0';\r\n                    *(id + i + 1) = '\\0';\r\n                }\r\n            }\r\n            else\r\n            {\r\n                bar(SX+i * w - 1 + space,SY - 1, SX + i * w + 1+ space, SY+ h); //遮盖光标\r\n                break;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (t!='\\n'&&t!='\\r' && t != ' '&&t!=033)\r\n            { // 033:Esc\r\n                if (t == '\\b' && i > 0)\r\n                {\r\n                    bar(SX+i*w-1+space,SY-1,SX + i * w + 1 + space, SY + h); //遮盖光标\r\n                    i--;                                                                 //减少一个字数\r\n                    bar(SX + i * w, SY, SX + i *w+w,SY+h);                         //遮盖文字\r\n                    line(SX + i * w + space, SY, SX + i * w + space,SY + h);            //绘制光标\r\n                    *(id + i) = '\\0';\r\n                    *(id + i + 1) = '\\0';\r\n                }\r\n            }\r\n            else\r\n            {\r\n                bar(SX+i*w -1+space,SY-1,SX+i*w+1+space,SY+h); //遮盖光标\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    //return i;\r\n}\r\n\r\n/*int ch_to_int(char *str)\r\n{\r\n\tint out=0;\r\n\tchar *p=str;\r\n\twhile(*p!='\\0')\r\n\t{\r\n\t\tout*=10;\r\n\t\tout+=*p-'0';\r\n\t}\r\n\treturn out;\r\n}*/"
        }
    ]
}